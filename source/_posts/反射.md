---
title: 反射
date: 2021-04-26 12:06:20
tags: Java
---
反射主要指序可以访问、检测和修改它本身状态或行为的一种能力。是 Java 程序开发语言的特征之一，它允许运行中的 Java 程序对自身进行检查，或者说“自审”，并能直接操作程序的内部属性和方法。
<!--more-->
# Class获取
其主要通过一下三种方式获取：
```
Car car=new Car();
//第一种
Class clazz=car.getClass();//这种方法不适合基本类型如int，float等
//第二种
Class clazz=Car.class;
Class clazz=int.class;
//第三种
Class clazz=Class.forName("com.test.Car");//使用类的全限定名称，包名加类名
```

# 获取修饰符
```
Car.class.getModifiers();//其返回的是int数值
Modifier.toString(Car.class.getModfiers());//int数值转化成public，abstract等
```

# Field
获取类的属性，即变量
```
Car.class.getDeclaredFields();//获取所有属性，不包括父类继承下来的属性
Car.class.getFields();//获取所有public属性，包括父类继承下来的属性
```

# Method
获取方式如上，其方法执行：
```
//Method
public Object invoke(Object obj,Object... args){}
```
- 参数obj是Method所依附的Class对应的类的实例。如果这个方法是静态方法，那么obj为null。后面的args是参数
- invoke()返回对象是Object，需要强制转换
- 会把异常包装到InvocationTargetException里面去，通过InvocationTargetException.getCause()可以获取真正的异常

# Constructor
- Class.newInstance()只能调用无参构造函数，而Constructor.newInstance()则可以调用任何构造函数
- Class.newInstance()直接抛出异常，而Constructor.newInstance()会把异常包装到InvocationTargetException里面去，和Method一样
- Class.newInstance()要求构造方法能访问，而Constructor.newInstance()能访问private修饰的构造器